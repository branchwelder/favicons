(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&e(t)}).observe(document,{childList:!0,subtree:!0});function l(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function e(r){if(r.ep)return;r.ep=!0;const n=l(r);fetch(r.href,n)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var de;const ne=window,V=ne.trustedTypes,ye=V?V.createPolicy("lit-html",{createHTML:c=>c}):void 0,he="$lit$",T=`lit$${(Math.random()+"").slice(9)}$`,Me="?"+T,qe=`<${Me}>`,z=document,X=()=>z.createComment(""),U=c=>c===null||typeof c!="object"&&typeof c!="function",$e=Array.isArray,Ke=c=>$e(c)||typeof(c==null?void 0:c[Symbol.iterator])=="function",ce=`[ 	
\f\r]`,O=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,we=/-->/g,be=/>/g,I=RegExp(`>|${ce}(?:([^\\s"'>=/]+)(${ce}*=${ce}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),xe=/'/g,Ce=/"/g,_e=/^(?:script|style|textarea|title)$/i,Je=c=>(i,...l)=>({_$litType$:c,strings:i,values:l}),ee=Je(1),j=Symbol.for("lit-noChange"),S=Symbol.for("lit-nothing"),Ee=new WeakMap,D=z.createTreeWalker(z,129,null,!1);function Re(c,i){if(!Array.isArray(c)||!c.hasOwnProperty("raw"))throw Error("invalid template strings array");return ye!==void 0?ye.createHTML(i):i}const Qe=(c,i)=>{const l=c.length-1,e=[];let r,n=i===2?"<svg>":"",t=O;for(let o=0;o<l;o++){const s=c[o];let d,h,u=-1,p=0;for(;p<s.length&&(t.lastIndex=p,h=t.exec(s),h!==null);)p=t.lastIndex,t===O?h[1]==="!--"?t=we:h[1]!==void 0?t=be:h[2]!==void 0?(_e.test(h[2])&&(r=RegExp("</"+h[2],"g")),t=I):h[3]!==void 0&&(t=I):t===I?h[0]===">"?(t=r??O,u=-1):h[1]===void 0?u=-2:(u=t.lastIndex-h[2].length,d=h[1],t=h[3]===void 0?I:h[3]==='"'?Ce:xe):t===Ce||t===xe?t=I:t===we||t===be?t=O:(t=I,r=void 0);const m=t===I&&c[o+1].startsWith("/>")?" ":"";n+=t===O?s+qe:u>=0?(e.push(d),s.slice(0,u)+he+s.slice(u)+T+m):s+T+(u===-2?(e.push(void 0),o):m)}return[Re(c,n+(c[l]||"<?>")+(i===2?"</svg>":"")),e]};class Y{constructor({strings:i,_$litType$:l},e){let r;this.parts=[];let n=0,t=0;const o=i.length-1,s=this.parts,[d,h]=Qe(i,l);if(this.el=Y.createElement(d,e),D.currentNode=this.el.content,l===2){const u=this.el.content,p=u.firstChild;p.remove(),u.append(...p.childNodes)}for(;(r=D.nextNode())!==null&&s.length<o;){if(r.nodeType===1){if(r.hasAttributes()){const u=[];for(const p of r.getAttributeNames())if(p.endsWith(he)||p.startsWith(T)){const m=h[t++];if(u.push(p),m!==void 0){const y=r.getAttribute(m.toLowerCase()+he).split(T),b=/([.?@])?(.*)/.exec(m);s.push({type:1,index:n,name:b[2],strings:y,ctor:b[1]==="."?et:b[1]==="?"?rt:b[1]==="@"?nt:ie})}else s.push({type:6,index:n})}for(const p of u)r.removeAttribute(p)}if(_e.test(r.tagName)){const u=r.textContent.split(T),p=u.length-1;if(p>0){r.textContent=V?V.emptyScript:"";for(let m=0;m<p;m++)r.append(u[m],X()),D.nextNode(),s.push({type:2,index:++n});r.append(u[p],X())}}}else if(r.nodeType===8)if(r.data===Me)s.push({type:2,index:n});else{let u=-1;for(;(u=r.data.indexOf(T,u+1))!==-1;)s.push({type:7,index:n}),u+=T.length-1}n++}}static createElement(i,l){const e=z.createElement("template");return e.innerHTML=i,e}}function F(c,i,l=c,e){var r,n,t,o;if(i===j)return i;let s=e!==void 0?(r=l._$Co)===null||r===void 0?void 0:r[e]:l._$Cl;const d=U(i)?void 0:i._$litDirective$;return(s==null?void 0:s.constructor)!==d&&((n=s==null?void 0:s._$AO)===null||n===void 0||n.call(s,!1),d===void 0?s=void 0:(s=new d(c),s._$AT(c,l,e)),e!==void 0?((t=(o=l)._$Co)!==null&&t!==void 0?t:o._$Co=[])[e]=s:l._$Cl=s),s!==void 0&&(i=F(c,s._$AS(c,i.values),s,e)),i}class Ze{constructor(i,l){this._$AV=[],this._$AN=void 0,this._$AD=i,this._$AM=l}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(i){var l;const{el:{content:e},parts:r}=this._$AD,n=((l=i==null?void 0:i.creationScope)!==null&&l!==void 0?l:z).importNode(e,!0);D.currentNode=n;let t=D.nextNode(),o=0,s=0,d=r[0];for(;d!==void 0;){if(o===d.index){let h;d.type===2?h=new q(t,t.nextSibling,this,i):d.type===1?h=new d.ctor(t,d.name,d.strings,this,i):d.type===6&&(h=new it(t,this,i)),this._$AV.push(h),d=r[++s]}o!==(d==null?void 0:d.index)&&(t=D.nextNode(),o++)}return D.currentNode=z,n}v(i){let l=0;for(const e of this._$AV)e!==void 0&&(e.strings!==void 0?(e._$AI(i,e,l),l+=e.strings.length-2):e._$AI(i[l])),l++}}class q{constructor(i,l,e,r){var n;this.type=2,this._$AH=S,this._$AN=void 0,this._$AA=i,this._$AB=l,this._$AM=e,this.options=r,this._$Cp=(n=r==null?void 0:r.isConnected)===null||n===void 0||n}get _$AU(){var i,l;return(l=(i=this._$AM)===null||i===void 0?void 0:i._$AU)!==null&&l!==void 0?l:this._$Cp}get parentNode(){let i=this._$AA.parentNode;const l=this._$AM;return l!==void 0&&(i==null?void 0:i.nodeType)===11&&(i=l.parentNode),i}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(i,l=this){i=F(this,i,l),U(i)?i===S||i==null||i===""?(this._$AH!==S&&this._$AR(),this._$AH=S):i!==this._$AH&&i!==j&&this._(i):i._$litType$!==void 0?this.g(i):i.nodeType!==void 0?this.$(i):Ke(i)?this.T(i):this._(i)}k(i){return this._$AA.parentNode.insertBefore(i,this._$AB)}$(i){this._$AH!==i&&(this._$AR(),this._$AH=this.k(i))}_(i){this._$AH!==S&&U(this._$AH)?this._$AA.nextSibling.data=i:this.$(z.createTextNode(i)),this._$AH=i}g(i){var l;const{values:e,_$litType$:r}=i,n=typeof r=="number"?this._$AC(i):(r.el===void 0&&(r.el=Y.createElement(Re(r.h,r.h[0]),this.options)),r);if(((l=this._$AH)===null||l===void 0?void 0:l._$AD)===n)this._$AH.v(e);else{const t=new Ze(n,this),o=t.u(this.options);t.v(e),this.$(o),this._$AH=t}}_$AC(i){let l=Ee.get(i.strings);return l===void 0&&Ee.set(i.strings,l=new Y(i)),l}T(i){$e(this._$AH)||(this._$AH=[],this._$AR());const l=this._$AH;let e,r=0;for(const n of i)r===l.length?l.push(e=new q(this.k(X()),this.k(X()),this,this.options)):e=l[r],e._$AI(n),r++;r<l.length&&(this._$AR(e&&e._$AB.nextSibling,r),l.length=r)}_$AR(i=this._$AA.nextSibling,l){var e;for((e=this._$AP)===null||e===void 0||e.call(this,!1,!0,l);i&&i!==this._$AB;){const r=i.nextSibling;i.remove(),i=r}}setConnected(i){var l;this._$AM===void 0&&(this._$Cp=i,(l=this._$AP)===null||l===void 0||l.call(this,i))}}class ie{constructor(i,l,e,r,n){this.type=1,this._$AH=S,this._$AN=void 0,this.element=i,this.name=l,this._$AM=r,this.options=n,e.length>2||e[0]!==""||e[1]!==""?(this._$AH=Array(e.length-1).fill(new String),this.strings=e):this._$AH=S}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(i,l=this,e,r){const n=this.strings;let t=!1;if(n===void 0)i=F(this,i,l,0),t=!U(i)||i!==this._$AH&&i!==j,t&&(this._$AH=i);else{const o=i;let s,d;for(i=n[0],s=0;s<n.length-1;s++)d=F(this,o[e+s],l,s),d===j&&(d=this._$AH[s]),t||(t=!U(d)||d!==this._$AH[s]),d===S?i=S:i!==S&&(i+=(d??"")+n[s+1]),this._$AH[s]=d}t&&!r&&this.j(i)}j(i){i===S?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,i??"")}}class et extends ie{constructor(){super(...arguments),this.type=3}j(i){this.element[this.name]=i===S?void 0:i}}const tt=V?V.emptyScript:"";class rt extends ie{constructor(){super(...arguments),this.type=4}j(i){i&&i!==S?this.element.setAttribute(this.name,tt):this.element.removeAttribute(this.name)}}class nt extends ie{constructor(i,l,e,r,n){super(i,l,e,r,n),this.type=5}_$AI(i,l=this){var e;if((i=(e=F(this,i,l,0))!==null&&e!==void 0?e:S)===j)return;const r=this._$AH,n=i===S&&r!==S||i.capture!==r.capture||i.once!==r.once||i.passive!==r.passive,t=i!==S&&(r===S||n);n&&this.element.removeEventListener(this.name,this,r),t&&this.element.addEventListener(this.name,this,i),this._$AH=i}handleEvent(i){var l,e;typeof this._$AH=="function"?this._$AH.call((e=(l=this.options)===null||l===void 0?void 0:l.host)!==null&&e!==void 0?e:this.element,i):this._$AH.handleEvent(i)}}class it{constructor(i,l,e){this.element=i,this.type=6,this._$AN=void 0,this._$AM=l,this.options=e}get _$AU(){return this._$AM._$AU}_$AI(i){F(this,i)}}const Se=ne.litHtmlPolyfillSupport;Se==null||Se(Y,q),((de=ne.litHtmlVersions)!==null&&de!==void 0?de:ne.litHtmlVersions=[]).push("2.8.0");const Le=(c,i,l)=>{var e,r;const n=(e=l==null?void 0:l.renderBefore)!==null&&e!==void 0?e:i;let t=n._$litPart$;if(t===void 0){const o=(r=l==null?void 0:l.renderBefore)!==null&&r!==void 0?r:null;n._$litPart$=t=new q(i.insertBefore(X(),o),o,void 0,l??{})}return t._$AI(c),t};class P{constructor(i,l,e){this.width=i,this.height=l,this.pixels=new Uint8ClampedArray(e)}static fromJSON(i){return new P(i.width,i.height,i.pixels)}static empty(i,l,e){let r=new Array(i*l).fill(e);return new P(i,l,r)}static fromTile(i,l,e){let r=[];for(let n=0;n<l;n++)for(let t=0;t<i;t++)r.push(e.pixel(t%e.width,n%e.height));return new P(i,l,r)}resize(i,l){let e=[];for(let r=0;r<l;r++)for(let n=0;n<i;n++)r>=this.height||n>=this.width?e.push(0):e.push(this.pixel(n,r));return new P(i,l,e)}make2d(){let i=Array.from(this.pixels).slice(),l=[];for(;i.length>0;)l.push(i.splice(0,this.width));return l}vMirror(){return this.make2d().map(i=>i.toReversed()).flat()}pixel(i,l){return i>this.width-1||i<0||l>this.height-1||l<0?-1:this.pixels.at(i+l*this.width)}draw(i){let l=this.pixels.slice();for(let{x:e,y:r,color:n}of i)e<0||r<0||e>=this.width||r>=this.height||(l[e+r*this.width]=n);return new P(this.width,this.height,l)}brush({x:i,y:l},e){let r={x:i,y:l,color:e};return this.draw([r])}flood({x:i,y:l},e){const r=this.pixel(i,l);if(r===e)return this.draw([]);const n=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];let t=[{x:i,y:l,color:e}];for(let o=0;o<t.length;o++)for(let{dx:s,dy:d}of n){let h=t[o].x+s,u=t[o].y+d;h>=0&&h<this.width&&u>=0&&u<this.height&&this.pixel(h,u)==r&&!t.some(p=>p.x==h&&p.y==u)&&t.push({x:h,y:u,color:e})}return this.draw(t)}shift(i,l){let e=[];for(let r=0;r<this.height;r++)for(let n=0;n<this.width;n++)e.push({x:(n-i%this.width+this.width)%this.width,y:(r-l%this.height+this.height)%this.height,color:this.pixel(n,r)});return this.draw(e)}rect(i,l,e){let r=Math.min(i.x,l.x),n=Math.min(i.y,l.y),t=Math.max(i.x,l.x),o=Math.max(i.y,l.y),s=[];for(let d=n;d<=o;d++)for(let h=r;h<=t;h++)s.push({x:h,y:d,color:e});return this.draw(s)}line(i,l,e){let r=[];if(Math.abs(i.x-l.x)>Math.abs(i.y-l.y)){i.x>l.x&&([i,l]=[l,i]);let n=(l.y-i.y)/(l.x-i.x);for(let{x:t,y:o}=i;t<=l.x;t++)r.push({x:t,y:Math.round(o),color:e}),o+=n}else{i.y>l.y&&([i,l]=[l,i]);let n=(l.x-i.x)/(l.y-i.y);for(let{x:t,y:o}=i;o<=l.y;o++)r.push({x:Math.round(t),y:o,color:e}),t+=n}return this.draw(r)}}class ke{constructor({state:i,dispatch:l,components:e}){this.state=i,this.initialized=!1,this.components=e.flat().map(r=>r({state:i,dispatch:l})),this.components.forEach(r=>{"attached"in r&&r.attached(i)})}syncState(i,l){this.state=i,this.components.forEach(e=>{e.syncState(i)})}}function at({state:c},{canvas:i}){let{scale:l,bitmap:e}=c;function r(){const t=l*16,o=t/devicePixelRatio-devicePixelRatio;i.width=t-1,i.height=t-1,i.style.cssText=`width: ${o}px; height: ${o}`,n()}function n(){const t=i.getContext("2d");t.resetTransform(),t.translate(-.5,-.5),t.clearRect(0,0,i.width,i.height),t.beginPath();for(let o=0;o<e.width;o++)t.moveTo(o*l,0),t.lineTo(o*l,e.height*l+1);for(let o=0;o<e.height;o++)t.moveTo(0,o*l),t.lineTo(e.width*l+1,o*l);t.stroke()}return r(),{syncState(t){l!=t.scale&&(l=t.scale,r())}}}function ot(c={}){return i=>at(i,c)}function st({state:c,dispatch:i},{target:l}){c.pos={x:-1,y:-1};function e(r,n){const t=l.getBoundingClientRect(),o=Math.floor((r-t.x)/c.scale*devicePixelRatio),s=Math.floor((n-t.y)/c.scale*devicePixelRatio);return{x:o,y:s}}return l.addEventListener("mousemove",r=>{const{x:n,y:t}=e(r.clientX,r.clientY);(c.pos.x!=n||c.pos.y!=t)&&i({pos:{x:n,y:t}})}),l.addEventListener("mouseleave",r=>{i({pos:{x:-1,y:-1}})}),{syncState(r){c=r}}}function lt(c={}){return i=>st(i,c)}function dt({state:c},{inner:i="#000000",outer:l="#ffffff",canvas:e}){let{scale:r,pos:n}=c;function t(){const s=r*16,d=s/devicePixelRatio-devicePixelRatio;e.width=s-1,e.height=s-1,e.style.cssText=`width: ${d}px; height: ${d}`}function o(){const s=e.getContext("2d");s.resetTransform(),s.clearRect(0,0,e.width,e.height),!(n.x<0||n.y<0)&&(s.translate(-.5,-.5),s.imageSmoothingEnabled=!1,s.strokeStyle=l,s.strokeRect(n.x*r+1,n.y*r+1,r-2,r-2),s.strokeStyle=i,s.strokeRect(n.x*r+2,n.y*r+2,r-4,r-4))}return t(),{syncState(s){r!=s.scale&&(r=s.scale,t()),s.pos!=n&&(n=s.pos,o())}}}function ct(c={}){return i=>dt(i,c)}function ht(c,i,l){function e(r,n){const t=n.bitmap.line({x:c.x,y:c.y},{x:r.x,y:r.y},n.activeColor);c=r,l({bitmap:t})}return e(c,i),e}function ut(c,i,l){function e({x:r,y:n},t){l({bitmap:t.bitmap.flood({x:r,y:n},t.activeColor)})}return e(c,i),e}function pt(c,i,l){function e({x:r,y:n},t){const o=i.bitmap.rect({x:c.x,y:c.y},{x:r,y:n},i.activeColor);l({bitmap:o})}return e(c),e}function ft(c,i,l){function e({x:r,y:n}){l({bitmap:i.bitmap.line({x:c.x,y:c.y},{x:r,y:n},i.activeColor)})}return e(c),e}function gt(c,i,l){function e({x:r,y:n}){l({bitmap:i.bitmap.shift(c.x-r,c.y-n)})}return e(c),e}function vt({state:c},{canvas:i}){let{scale:l,palette:e,bitmap:r}=c,n=null;function t(){const s=l*16,d=s/devicePixelRatio-devicePixelRatio;i.width=s-1,i.height=s-1,i.style.cssText=`width: ${d}px; height: ${d}`,n=null,o()}function o(){const s=i.getContext("2d");for(let d=0;d<r.height;d++)for(let h=0;h<r.width;h++){let u=r.pixel(h,d);(n==null||n.pixel(h,d)!=u)&&(s.translate(h*l,d*l),s.fillStyle=e[u],s.clearRect(0,0,l,l),s.fillRect(0,0,l,l),s.setTransform(1,0,0,1,0,0))}n=r}return t(),{syncState(s){e!=s.palette&&(e=s.palette,n=null),l!=s.scale&&(l=s.scale,t(),n=null),n!=s.bitmap&&(r=s.bitmap,o())}}}function mt(c={}){return i=>vt(i,c)}function yt({state:c},{canvas:i}){let{palette:l,bitmap:e}=c,r=null;const n=1;function t(){const d=16/devicePixelRatio-devicePixelRatio;i.width=16,i.height=16,i.style.cssText=`width: ${d}px; height: ${d}`,r=null,o()}function o(){const s=i.getContext("2d");for(let d=0;d<e.height;d++)for(let h=0;h<e.width;h++){let u=e.pixel(h,d);(r==null||r.pixel(h,d)!=u)&&(s.translate(h*n,d*n),s.fillStyle=l[u],s.clearRect(0,0,n,n),s.fillRect(0,0,n,n),s.setTransform(1,0,0,1,0,0))}r=e}return t(),{syncState(s){l!=s.palette&&(l=s.palette,r=null),r!=s.bitmap&&(e=s.bitmap,o())}}}function wt(c={}){return i=>yt(i,c)}function bt({state:c,dispatch:i},{tools:l,target:e}){return e.addEventListener("pointerdown",r=>{let n=c.pos,t=l[c.activeTool],o=t(n,c,i);if(!o)return;let s=d=>{if(d.buttons==0)e.removeEventListener("mousemove",s);else{let h=c.pos;if(h.x==n.x&&h.y==n.y)return;o(c.pos,c),n=h}};e.addEventListener("mousemove",s)}),{syncState(r){c=r}}}function xt(c={}){return i=>bt(i,c)}var Ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Et(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Te={exports:{}};/**
 * jscolor - JavaScript Color Picker
 *
 * @link    http://jscolor.com
 * @license For open source use: GPLv3
 *          For commercial use: JSColor Commercial License
 * @author  Jan Odvarko - East Desire
 *
 * See usage examples at http://jscolor.com/examples/
 */(function(c){(function(i,l){{c.exports=i.document?l(i):function(e){if(!e.document)throw new Error("jscolor needs a window with document");return l(e)};return}})(typeof window<"u"?window:Ct,function(i){var l=function(){var e={initialized:!1,instances:[],readyQueue:[],register:function(){typeof i<"u"&&i.document&&i.document.addEventListener("DOMContentLoaded",e.pub.init,!1)},installBySelector:function(r,n){if(n=n?e.node(n):i.document,!n)throw new Error("Missing root node");for(var t=n.querySelectorAll(r),o=new RegExp("(^|\\s)("+e.pub.lookupClass+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),s=0;s<t.length;s+=1)if(!(t[s].jscolor&&t[s].jscolor instanceof e.pub)&&!(t[s].type!==void 0&&t[s].type.toLowerCase()=="color"&&e.isColorAttrSupported)){var d,h;if((d=e.getDataAttr(t[s],"jscolor"))!==null||t[s].className&&(h=t[s].className.match(o))){var u=t[s],p="";d!==null?p=d:h&&(console.warn('Installation using class name is DEPRECATED. Use data-jscolor="" attribute instead.'+e.docsRef),h[4]&&(p=h[4]));var m=null;if(p.trim())try{m=e.parseOptionsStr(p)}catch(y){console.warn(y+`
`+p)}try{new e.pub(u,m)}catch(y){console.warn(y)}}}},parseOptionsStr:function(r){var n=null;try{n=JSON.parse(r)}catch(t){if(e.pub.looseJSON)try{n=new Function("var opts = ("+r+'); return typeof opts === "object" ? opts : {};')()}catch(o){throw new Error("Could not evaluate jscolor options: "+o)}else throw new Error("Could not parse jscolor options as JSON: "+t)}return n},getInstances:function(){for(var r=[],n=0;n<e.instances.length;n+=1)e.instances[n]&&e.instances[n].targetElement&&r.push(e.instances[n]);return r},createEl:function(r){var n=i.document.createElement(r);return e.setData(n,"gui",!0),n},node:function(r){if(!r)return null;if(typeof r=="string"){var n=r,t=null;try{t=i.document.querySelector(n)}catch(o){return console.warn(o),null}return t||console.warn("No element matches the selector: %s",n),t}return e.isNode(r)?r:(console.warn("Invalid node of type %s: %s",typeof r,r),null)},isNode:function(r){return typeof Node=="object"?r instanceof Node:r&&typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},nodeName:function(r){return r&&r.nodeName?r.nodeName.toLowerCase():!1},removeChildren:function(r){for(;r.firstChild;)r.removeChild(r.firstChild)},isTextInput:function(r){return r&&e.nodeName(r)==="input"&&r.type.toLowerCase()==="text"},isButton:function(r){if(!r)return!1;var n=e.nodeName(r);return n==="button"||n==="input"&&["button","submit","reset"].indexOf(r.type.toLowerCase())>-1},isButtonEmpty:function(r){switch(e.nodeName(r)){case"input":return!r.value||r.value.trim()==="";case"button":return r.textContent.trim()===""}return null},isPassiveEventSupported:function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});i.addEventListener("testPassive",null,n),i.removeEventListener("testPassive",null,n)}catch{}return r}(),isColorAttrSupported:function(){var r=i.document.createElement("input");return!!(r.setAttribute&&(r.setAttribute("type","color"),r.type.toLowerCase()=="color"))}(),dataProp:"_data_jscolor",setData:function(){var r=arguments[0];if(arguments.length===3){var n=r.hasOwnProperty(e.dataProp)?r[e.dataProp]:r[e.dataProp]={},t=arguments[1],o=arguments[2];return n[t]=o,!0}else if(arguments.length===2&&typeof arguments[1]=="object"){var n=r.hasOwnProperty(e.dataProp)?r[e.dataProp]:r[e.dataProp]={},s=arguments[1];for(var t in s)s.hasOwnProperty(t)&&(n[t]=s[t]);return!0}throw new Error("Invalid arguments")},removeData:function(){var r=arguments[0];if(!r.hasOwnProperty(e.dataProp))return!0;for(var n=1;n<arguments.length;n+=1){var t=arguments[n];delete r[e.dataProp][t]}return!0},getData:function(r,n,t){if(!r.hasOwnProperty(e.dataProp))if(t!==void 0)r[e.dataProp]={};else return;var o=r[e.dataProp];return!o.hasOwnProperty(n)&&t!==void 0&&(o[n]=t),o[n]},getDataAttr:function(r,n){var t="data-"+n,o=r.getAttribute(t);return o},setDataAttr:function(r,n,t){var o="data-"+n;r.setAttribute(o,t)},_attachedGroupEvents:{},attachGroupEvent:function(r,n,t,o){e._attachedGroupEvents.hasOwnProperty(r)||(e._attachedGroupEvents[r]=[]),e._attachedGroupEvents[r].push([n,t,o]),n.addEventListener(t,o,!1)},detachGroupEvents:function(r){if(e._attachedGroupEvents.hasOwnProperty(r)){for(var n=0;n<e._attachedGroupEvents[r].length;n+=1){var t=e._attachedGroupEvents[r][n];t[0].removeEventListener(t[1],t[2],!1)}delete e._attachedGroupEvents[r]}},preventDefault:function(r){r.preventDefault&&r.preventDefault(),r.returnValue=!1},triggerEvent:function(r,n,t,o){if(r){var s=null;return typeof Event=="function"?s=new Event(n,{bubbles:t,cancelable:o}):(s=i.document.createEvent("Event"),s.initEvent(n,t,o)),s?(e.setData(s,"internal",!0),r.dispatchEvent(s),!0):!1}},triggerInputEvent:function(r,n,t,o){r&&e.isTextInput(r)&&e.triggerEvent(r,n,t,o)},eventKey:function(r){var n={9:"Tab",13:"Enter",27:"Escape"};return typeof r.code=="string"?r.code:r.keyCode!==void 0&&n.hasOwnProperty(r.keyCode)?n[r.keyCode]:null},strList:function(r){return r?r.replace(/^\s+|\s+$/g,"").split(/\s+/):[]},hasClass:function(r,n){return n?r.classList!==void 0?r.classList.contains(n):(" "+r.className.replace(/\s+/g," ")+" ").indexOf(" "+n+" ")!=-1:!1},addClass:function(r,n){var t=e.strList(n);if(r.classList!==void 0){for(var o=0;o<t.length;o+=1)r.classList.add(t[o]);return}for(var o=0;o<t.length;o+=1)e.hasClass(r,t[o])||(r.className+=(r.className?" ":"")+t[o])},removeClass:function(r,n){var t=e.strList(n);if(r.classList!==void 0){for(var o=0;o<t.length;o+=1)r.classList.remove(t[o]);return}for(var o=0;o<t.length;o+=1){var s=new RegExp("^\\s*"+t[o]+"\\s*|\\s*"+t[o]+"\\s*$|\\s+"+t[o]+"(\\s+)","g");r.className=r.className.replace(s,"$1")}},getCompStyle:function(r){var n=i.getComputedStyle?i.getComputedStyle(r):r.currentStyle;return n||{}},setStyle:function(r,n,t,o){var s=t?"important":"",d=null;for(var h in n)if(n.hasOwnProperty(h)){var u=null;n[h]===null?(d||(d=e.getData(r,"origStyle")),d&&d.hasOwnProperty(h)&&(u=d[h])):(o&&(d||(d=e.getData(r,"origStyle",{})),d.hasOwnProperty(h)||(d[h]=r.style[h])),u=n[h]),u!==null&&r.style.setProperty(h,u,s)}},appendCss:function(r){var n=document.querySelector("head"),t=document.createElement("style");t.innerText=r,n.appendChild(t)},appendDefaultCss:function(r){e.appendCss([".jscolor-wrap, .jscolor-wrap div, .jscolor-wrap canvas { position:static; display:block; visibility:visible; overflow:visible; margin:0; padding:0; border:none; border-radius:0; outline:none; z-index:auto; float:none; width:auto; height:auto; left:auto; right:auto; top:auto; bottom:auto; min-width:0; min-height:0; max-width:none; max-height:none; background:none; clip:auto; opacity:1; transform:none; box-shadow:none; box-sizing:content-box; }",".jscolor-wrap { clear:both; }",".jscolor-wrap .jscolor-picker { position:relative; }",".jscolor-wrap .jscolor-shadow { position:absolute; left:0; top:0; width:100%; height:100%; }",".jscolor-wrap .jscolor-border { position:relative; }",".jscolor-wrap .jscolor-palette { position:absolute; }",".jscolor-wrap .jscolor-palette-sw { position:absolute; display:block; cursor:pointer; }",".jscolor-wrap .jscolor-btn { position:absolute; overflow:hidden; white-space:nowrap; font:13px sans-serif; text-align:center; cursor:pointer; }"].join(`
`))},hexColor:function(r,n,t){return"#"+(("0"+Math.round(r).toString(16)).slice(-2)+("0"+Math.round(n).toString(16)).slice(-2)+("0"+Math.round(t).toString(16)).slice(-2)).toUpperCase()},hexaColor:function(r,n,t,o){return"#"+(("0"+Math.round(r).toString(16)).slice(-2)+("0"+Math.round(n).toString(16)).slice(-2)+("0"+Math.round(t).toString(16)).slice(-2)+("0"+Math.round(o*255).toString(16)).slice(-2)).toUpperCase()},rgbColor:function(r,n,t){return"rgb("+Math.round(r)+","+Math.round(n)+","+Math.round(t)+")"},rgbaColor:function(r,n,t,o){return"rgba("+Math.round(r)+","+Math.round(n)+","+Math.round(t)+","+Math.round((o??1)*100)/100+")"},linearGradient:function(){function r(){for(var t="linear-gradient",o=["","-webkit-","-moz-","-o-","-ms-"],s=i.document.createElement("div"),d=0;d<o.length;d+=1){var h=o[d]+t,u=h+"(to right, rgba(0,0,0,0), rgba(0,0,0,0))";if(s.style.background=u,s.style.background)return h}return t}var n=r();return function(){return n+"("+Array.prototype.join.call(arguments,", ")+")"}}(),setBorderRadius:function(r,n){e.setStyle(r,{"border-radius":n||"0"})},setBoxShadow:function(r,n){e.setStyle(r,{"box-shadow":n||"none"})},getElementPos:function(r,n){var t=0,o=0,s=r.getBoundingClientRect();if(t=s.left,o=s.top,!n){var d=e.getViewPos();t+=d[0],o+=d[1]}return[t,o]},getElementSize:function(r){return[r.offsetWidth,r.offsetHeight]},getAbsPointerPos:function(r){var n=0,t=0;return typeof r.changedTouches<"u"&&r.changedTouches.length?(n=r.changedTouches[0].clientX,t=r.changedTouches[0].clientY):typeof r.clientX=="number"&&(n=r.clientX,t=r.clientY),{x:n,y:t}},getRelPointerPos:function(r){var n=r.target||r.srcElement,t=n.getBoundingClientRect(),o=0,s=0,d=0,h=0;return typeof r.changedTouches<"u"&&r.changedTouches.length?(d=r.changedTouches[0].clientX,h=r.changedTouches[0].clientY):typeof r.clientX=="number"&&(d=r.clientX,h=r.clientY),o=d-t.left,s=h-t.top,{x:o,y:s}},getViewPos:function(){var r=i.document.documentElement;return[(i.pageXOffset||r.scrollLeft)-(r.clientLeft||0),(i.pageYOffset||r.scrollTop)-(r.clientTop||0)]},getViewSize:function(){var r=i.document.documentElement;return[i.innerWidth||r.clientWidth,i.innerHeight||r.clientHeight]},RGB_HSV:function(r,n,t){r/=255,n/=255,t/=255;var o=Math.min(Math.min(r,n),t),s=Math.max(Math.max(r,n),t),d=s-o;if(d===0)return[null,0,100*s];var h=r===o?3+(t-n)/d:n===o?5+(r-t)/d:1+(n-r)/d;return[60*(h===6?0:h),100*(d/s),100*s]},HSV_RGB:function(r,n,t){var o=255*(t/100);if(r===null)return[o,o,o];r/=60,n/=100;var s=Math.floor(r),d=s%2?r-s:1-(r-s),h=o*(1-n),u=o*(1-n*d);switch(s){case 6:case 0:return[o,u,h];case 1:return[u,o,h];case 2:return[h,o,u];case 3:return[h,u,o];case 4:return[u,h,o];case 5:return[o,h,u]}},parseColorString:function(r){var n={rgba:null,format:null},t;if(t=r.match(/^\W*([0-9A-F]{3,8})\W*$/i)){if(t[1].length===8)n.format="hexa",n.rgba=[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4,6),16),parseInt(t[1].slice(6,8),16)/255];else if(t[1].length===6)n.format="hex",n.rgba=[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4,6),16),null];else if(t[1].length===3)n.format="hex",n.rgba=[parseInt(t[1].charAt(0)+t[1].charAt(0),16),parseInt(t[1].charAt(1)+t[1].charAt(1),16),parseInt(t[1].charAt(2)+t[1].charAt(2),16),null];else return!1;return n}if(t=r.match(/^\W*rgba?\(([^)]*)\)\W*$/i)){var o=t[1].split(","),s=/^\s*(\d+|\d*\.\d+|\d+\.\d*)\s*$/,d,h,u,p;if(o.length>=3&&(d=o[0].match(s))&&(h=o[1].match(s))&&(u=o[2].match(s)))return n.format="rgb",n.rgba=[parseFloat(d[1])||0,parseFloat(h[1])||0,parseFloat(u[1])||0,null],o.length>=4&&(p=o[3].match(s))&&(n.format="rgba",n.rgba[3]=parseFloat(p[1])||0),n}return!1},parsePaletteValue:function(r){var n=[];typeof r=="string"?r.replace(/#[0-9A-F]{3}\b|#[0-9A-F]{6}([0-9A-F]{2})?\b|rgba?\(([^)]*)\)/ig,function(d){n.push(d)}):Array.isArray(r)&&(n=r);for(var t=[],o=0;o<n.length;o++){var s=e.parseColorString(n[o]);s&&t.push(s)}return t},containsTranparentColor:function(r){for(var n=0;n<r.length;n++){var t=r[n].rgba[3];if(t!==null&&t<1)return!0}return!1},isAlphaFormat:function(r){switch(r.toLowerCase()){case"hexa":case"rgba":return!0}return!1},scaleCanvasForHighDPR:function(r){var n=i.devicePixelRatio||1;r.width*=n,r.height*=n;var t=r.getContext("2d");t.scale(n,n)},genColorPreviewCanvas:function(r,n,t,o){var s=Math.round(e.pub.previewSeparator.length),d=e.pub.chessboardSize,h=e.pub.chessboardColor1,u=e.pub.chessboardColor2,p=t||d*2,m=d*2,y=e.createEl("canvas"),b=y.getContext("2d");y.width=p,y.height=m,o&&e.scaleCanvasForHighDPR(y),b.fillStyle=h,b.fillRect(0,0,p,m),b.fillStyle=u;for(var L=0;L<p;L+=d*2)b.fillRect(L,0,d,d),b.fillRect(L+d,d,d,d);r&&(b.fillStyle=r,b.fillRect(0,0,p,m));var M=null;switch(n){case"left":M=0,b.clearRect(0,0,s/2,m);break;case"right":M=p-s,b.clearRect(p-s/2,0,s/2,m);break}if(M!==null){b.lineWidth=1;for(var $=0;$<e.pub.previewSeparator.length;$+=1)b.beginPath(),b.strokeStyle=e.pub.previewSeparator[$],b.moveTo(.5+M+$,0),b.lineTo(.5+M+$,m),b.stroke()}return{canvas:y,width:p,height:m}},genColorPreviewGradient:function(r,n,t){var o=[];return n&&t?o=["to "+{left:"right",right:"left"}[n],r+" 0%",r+" "+t+"px","rgba(0,0,0,0) "+(t+1)+"px","rgba(0,0,0,0) 100%"]:o=["to right",r+" 0%",r+" 100%"],e.linearGradient.apply(this,o)},redrawPosition:function(){if(!(!e.picker||!e.picker.owner)){var r=e.picker.owner;if(r.container!==i.document.body)e._drawPosition(r,0,0,"relative",!1);else{var n,t;r.fixed?(n=e.getElementPos(r.targetElement,!0),t=[0,0]):(n=e.getElementPos(r.targetElement),t=e.getViewPos());var o=e.getElementSize(r.targetElement),s=e.getViewSize(),d=e.getPickerDims(r),h=[d.borderW,d.borderH],u,p,m;switch(r.position.toLowerCase()){case"left":u=1,p=0,m=-1;break;case"right":u=1,p=0,m=1;break;case"top":u=0,p=1,m=-1;break;default:u=0,p=1,m=1;break}var y=(o[p]+h[p])/2;if(r.smartPosition)var b=[-t[u]+n[u]+h[u]>s[u]&&-t[u]+n[u]+o[u]/2>s[u]/2&&n[u]+o[u]-h[u]>=0?n[u]+o[u]-h[u]:n[u],-t[p]+n[p]+o[p]+h[p]-y+y*m>s[p]?-t[p]+n[p]+o[p]/2>s[p]/2&&n[p]+o[p]-y-y*m>=0?n[p]+o[p]-y-y*m:n[p]+o[p]-y+y*m:n[p]+o[p]-y+y*m>=0?n[p]+o[p]-y+y*m:n[p]+o[p]-y-y*m];else var b=[n[u],n[p]+o[p]-y+y*m];var L=b[u],M=b[p],$=r.fixed?"fixed":"absolute",ae=(b[0]+h[0]>n[0]||b[0]<n[0]+o[0])&&b[1]+h[1]<n[1]+o[1];e._drawPosition(r,L,M,$,ae)}}},_drawPosition:function(r,n,t,o,s){var d=s?0:r.shadowBlur;e.picker.wrap.style.position=o,(Math.round(parseFloat(e.picker.wrap.style.left))!==Math.round(n)||Math.round(parseFloat(e.picker.wrap.style.top))!==Math.round(t))&&(e.picker.wrap.style.left=n+"px",e.picker.wrap.style.top=t+"px"),e.setBoxShadow(e.picker.boxS,r.shadow?new e.BoxShadow(0,d,r.shadowBlur,0,r.shadowColor):null)},getPickerDims:function(r){var n=2*r.controlBorderWidth+r.width,t=2*r.controlBorderWidth+r.height,o=2*r.controlBorderWidth+2*e.getControlPadding(r)+r.sliderSize;e.getSliderChannel(r)&&(n+=o),r.hasAlphaChannel()&&(n+=o);var s=e.getPaletteDims(r,n);s.height&&(t+=s.height+r.padding),r.closeButton&&(t+=2*r.controlBorderWidth+r.padding+r.buttonHeight);var d=n+2*r.padding,h=t+2*r.padding;return{contentW:n,contentH:t,paddedW:d,paddedH:h,borderW:d+2*r.borderWidth,borderH:h+2*r.borderWidth,palette:s}},getPaletteDims:function(r,n){var t=0,o=0,s=0,d=0,h=0,u=r._palette?r._palette.length:0;return u&&(t=r.paletteCols,o=t>0?Math.ceil(u/t):0,s=Math.max(1,Math.floor((n-(t-1)*r.paletteSpacing)/t)),d=r.paletteHeight?Math.min(r.paletteHeight,s):s),o&&(h=o*d+(o-1)*r.paletteSpacing),{cols:t,rows:o,cellW:s,cellH:d,width:n,height:h}},getControlPadding:function(r){return Math.max(r.padding/2,2*r.pointerBorderWidth+r.pointerThickness-r.controlBorderWidth)},getPadYChannel:function(r){switch(r.mode.charAt(1).toLowerCase()){case"v":return"v"}return"s"},getSliderChannel:function(r){if(r.mode.length>2)switch(r.mode.charAt(2).toLowerCase()){case"s":return"s";case"v":return"v"}return null},triggerCallback:function(r,n){if(r[n]){var t=null;if(typeof r[n]=="string")try{t=new Function(r[n])}catch(o){console.error(o)}else t=r[n];t&&t.call(r)}},triggerGlobal:function(r){for(var n=e.getInstances(),t=0;t<n.length;t+=1)n[t].trigger(r)},_pointerMoveEvent:{mouse:"mousemove",touch:"touchmove"},_pointerEndEvent:{mouse:"mouseup",touch:"touchend"},_pointerOrigin:null,onDocumentKeyUp:function(r){["Tab","Escape"].indexOf(e.eventKey(r))!==-1&&e.picker&&e.picker.owner&&e.picker.owner.tryHide()},onWindowResize:function(r){e.redrawPosition()},onWindowScroll:function(r){e.redrawPosition()},onParentScroll:function(r){e.picker&&e.picker.owner&&e.picker.owner.tryHide()},onDocumentMouseDown:function(r){var n=r.target||r.srcElement;if(n.jscolor&&n.jscolor instanceof e.pub)n.jscolor.showOnClick&&!n.disabled&&n.jscolor.show();else if(e.getData(n,"gui")){var t=e.getData(n,"control");t&&e.onControlPointerStart(r,n,e.getData(n,"control"),"mouse")}else e.picker&&e.picker.owner&&e.picker.owner.tryHide()},onPickerTouchStart:function(r){var n=r.target||r.srcElement;e.getData(n,"control")&&e.onControlPointerStart(r,n,e.getData(n,"control"),"touch")},onControlPointerStart:function(r,n,t,o){var s=e.getData(n,"instance");e.preventDefault(r);var d=function(y,b){e.attachGroupEvent("drag",y,e._pointerMoveEvent[o],e.onDocumentPointerMove(r,n,t,o,b)),e.attachGroupEvent("drag",y,e._pointerEndEvent[o],e.onDocumentPointerEnd(r,n,t,o))};if(d(i.document,[0,0]),i.parent&&i.frameElement){var h=i.frameElement.getBoundingClientRect(),u=[-h.left,-h.top];d(i.parent.window.document,u)}var p=e.getAbsPointerPos(r),m=e.getRelPointerPos(r);switch(e._pointerOrigin={x:p.x-m.x,y:p.y-m.y},t){case"pad":e.getSliderChannel(s)==="v"&&s.channels.v===0&&s.fromHSVA(null,null,100,null),e.setPad(s,r,0,0);break;case"sld":e.setSld(s,r,0);break;case"asld":e.setASld(s,r,0);break}s.trigger("input")},onDocumentPointerMove:function(r,n,t,o,s){return function(d){var h=e.getData(n,"instance");switch(t){case"pad":e.setPad(h,d,s[0],s[1]);break;case"sld":e.setSld(h,d,s[1]);break;case"asld":e.setASld(h,d,s[1]);break}h.trigger("input")}},onDocumentPointerEnd:function(r,n,t,o){return function(s){var d=e.getData(n,"instance");e.detachGroupEvents("drag"),d.trigger("input"),d.trigger("change")}},onPaletteSampleClick:function(r){var n=r.currentTarget,t=e.getData(n,"instance"),o=e.getData(n,"color");t.format.toLowerCase()==="any"&&(t._setFormat(o.format),e.isAlphaFormat(t.getFormat())||(o.rgba[3]=1)),o.rgba[3]===null&&(t.paletteSetsAlpha===!0||t.paletteSetsAlpha==="auto"&&t._paletteHasTransparency)&&(o.rgba[3]=1),t.fromRGBA.apply(t,o.rgba),t.trigger("input"),t.trigger("change"),t.hideOnPaletteClick&&t.hide()},setPad:function(r,n,t,o){var s=e.getAbsPointerPos(n),d=t+s.x-e._pointerOrigin.x-r.padding-r.controlBorderWidth,h=o+s.y-e._pointerOrigin.y-r.padding-r.controlBorderWidth,u=d*(360/(r.width-1)),p=100-h*(100/(r.height-1));switch(e.getPadYChannel(r)){case"s":r.fromHSVA(u,p,null,null);break;case"v":r.fromHSVA(u,null,p,null);break}},setSld:function(r,n,t){var o=e.getAbsPointerPos(n),s=t+o.y-e._pointerOrigin.y-r.padding-r.controlBorderWidth,d=100-s*(100/(r.height-1));switch(e.getSliderChannel(r)){case"s":r.fromHSVA(null,d,null,null);break;case"v":r.fromHSVA(null,null,d,null);break}},setASld:function(r,n,t){var o=e.getAbsPointerPos(n),s=t+o.y-e._pointerOrigin.y-r.padding-r.controlBorderWidth,d=1-s*(1/(r.height-1));if(d<1){var h=r.getFormat();r.format.toLowerCase()==="any"&&!e.isAlphaFormat(h)&&r._setFormat(h==="hex"?"hexa":"rgba")}r.fromHSVA(null,null,null,d)},createPadCanvas:function(){var r={elm:null,draw:null},n=e.createEl("canvas"),t=n.getContext("2d"),o=function(s,d,h){n.width=s,n.height=d,t.clearRect(0,0,n.width,n.height);var u=t.createLinearGradient(0,0,n.width,0);u.addColorStop(0/6,"#F00"),u.addColorStop(1/6,"#FF0"),u.addColorStop(2/6,"#0F0"),u.addColorStop(3/6,"#0FF"),u.addColorStop(4/6,"#00F"),u.addColorStop(5/6,"#F0F"),u.addColorStop(6/6,"#F00"),t.fillStyle=u,t.fillRect(0,0,n.width,n.height);var p=t.createLinearGradient(0,0,0,n.height);switch(h.toLowerCase()){case"s":p.addColorStop(0,"rgba(255,255,255,0)"),p.addColorStop(1,"rgba(255,255,255,1)");break;case"v":p.addColorStop(0,"rgba(0,0,0,0)"),p.addColorStop(1,"rgba(0,0,0,1)");break}t.fillStyle=p,t.fillRect(0,0,n.width,n.height)};return r.elm=n,r.draw=o,r},createSliderGradient:function(){var r={elm:null,draw:null},n=e.createEl("canvas"),t=n.getContext("2d"),o=function(s,d,h,u){n.width=s,n.height=d,t.clearRect(0,0,n.width,n.height);var p=t.createLinearGradient(0,0,0,n.height);p.addColorStop(0,h),p.addColorStop(1,u),t.fillStyle=p,t.fillRect(0,0,n.width,n.height)};return r.elm=n,r.draw=o,r},createASliderGradient:function(){var r={elm:null,draw:null},n=e.createEl("canvas"),t=n.getContext("2d"),o=function(s,d,h){n.width=s,n.height=d,t.clearRect(0,0,n.width,n.height);var u=n.width/2,p=e.pub.chessboardColor1,m=e.pub.chessboardColor2;if(t.fillStyle=p,t.fillRect(0,0,n.width,n.height),u>0)for(var y=0;y<n.height;y+=u*2)t.fillStyle=m,t.fillRect(0,y,u,u),t.fillRect(u,y+u,u,u);var b=t.createLinearGradient(0,0,0,n.height);b.addColorStop(0,h),b.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=b,t.fillRect(0,0,n.width,n.height)};return r.elm=n,r.draw=o,r},BoxShadow:function(){var r=function(n,t,o,s,d,h){this.hShadow=n,this.vShadow=t,this.blur=o,this.spread=s,this.color=d,this.inset=!!h};return r.prototype.toString=function(){var n=[Math.round(this.hShadow)+"px",Math.round(this.vShadow)+"px",Math.round(this.blur)+"px",Math.round(this.spread)+"px",this.color];return this.inset&&n.push("inset"),n.join(" ")},r}(),flags:{leaveValue:1,leaveAlpha:2,leavePreview:4},enumOpts:{format:["auto","any","hex","hexa","rgb","rgba"],previewPosition:["left","right"],mode:["hsv","hvs","hs","hv"],position:["left","right","top","bottom"],alphaChannel:["auto",!0,!1],paletteSetsAlpha:["auto",!0,!1]},deprecatedOpts:{styleElement:"previewElement",onFineChange:"onInput",overwriteImportant:"forceStyle",closable:"closeButton",insetWidth:"controlBorderWidth",insetColor:"controlBorderColor",refine:null},docsRef:" See https://jscolor.com/docs/",pub:function(r,n){var t=this;n||(n={}),this.channels={r:255,g:255,b:255,h:0,s:0,v:100,a:1},this.format="auto",this.value=void 0,this.alpha=void 0,this.random=!1,this.onChange=void 0,this.onInput=void 0,this.valueElement=void 0,this.alphaElement=void 0,this.previewElement=void 0,this.previewPosition="left",this.previewSize=32,this.previewPadding=8,this.required=!0,this.hash=!0,this.uppercase=!0,this.forceStyle=!0,this.width=181,this.height=101,this.mode="HSV",this.alphaChannel="auto",this.position="bottom",this.smartPosition=!0,this.showOnClick=!0,this.hideOnLeave=!0,this.palette=[],this.paletteCols=10,this.paletteSetsAlpha="auto",this.paletteHeight=16,this.paletteSpacing=4,this.hideOnPaletteClick=!1,this.sliderSize=16,this.crossSize=8,this.closeButton=!1,this.closeText="Close",this.buttonColor="rgba(0,0,0,1)",this.buttonHeight=18,this.padding=12,this.backgroundColor="rgba(255,255,255,1)",this.borderWidth=1,this.borderColor="rgba(187,187,187,1)",this.borderRadius=8,this.controlBorderWidth=1,this.controlBorderColor="rgba(187,187,187,1)",this.shadow=!0,this.shadowBlur=15,this.shadowColor="rgba(0,0,0,0.2)",this.pointerColor="rgba(76,76,76,1)",this.pointerBorderWidth=1,this.pointerBorderColor="rgba(255,255,255,1)",this.pointerThickness=2,this.zIndex=5e3,this.container=void 0,this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.minA=0,this.maxA=1,this.option=function(){if(!arguments.length)throw new Error("No option specified");if(arguments.length===1&&typeof arguments[0]=="string"){try{return s(arguments[0])}catch(v){console.warn(v)}return!1}else if(arguments.length>=2&&typeof arguments[0]=="string"){try{if(!o(arguments[0],arguments[1]))return!1}catch(v){return console.warn(v),!1}return this.redraw(),this.exposeColor(),!0}else if(arguments.length===1&&typeof arguments[0]=="object"){var a=arguments[0],f=!0;for(var g in a)if(a.hasOwnProperty(g))try{o(g,a[g])||(f=!1)}catch(v){console.warn(v),f=!1}return this.redraw(),this.exposeColor(),f}throw new Error("Invalid arguments")},this.channel=function(a,f){if(typeof a!="string")throw new Error("Invalid value for channel name: "+a);if(f===void 0)return this.channels.hasOwnProperty(a.toLowerCase())?this.channels[a.toLowerCase()]:(console.warn("Getting unknown channel: "+a),!1);var g=!1;switch(a.toLowerCase()){case"r":g=this.fromRGBA(f,null,null,null);break;case"g":g=this.fromRGBA(null,f,null,null);break;case"b":g=this.fromRGBA(null,null,f,null);break;case"h":g=this.fromHSVA(f,null,null,null);break;case"s":g=this.fromHSVA(null,f,null,null);break;case"v":g=this.fromHSVA(null,null,f,null);break;case"a":g=this.fromHSVA(null,null,null,f);break;default:return console.warn("Setting unknown channel: "+a),!1}return g?(this.redraw(),!0):!1},this.trigger=function(a){for(var f=e.strList(a),g=0;g<f.length;g+=1){var v=f[g].toLowerCase(),x=null;switch(v){case"input":x="onInput";break;case"change":x="onChange";break}x&&e.triggerCallback(this,x),e.triggerInputEvent(this.valueElement,v,!0,!0)}},this.fromHSVA=function(a,f,g,v,x){if(a===void 0&&(a=null),f===void 0&&(f=null),g===void 0&&(g=null),v===void 0&&(v=null),a!==null){if(isNaN(a))return!1;this.channels.h=Math.max(0,Math.min(360,a))}if(f!==null){if(isNaN(f))return!1;this.channels.s=Math.max(0,Math.min(100,this.maxS,f),this.minS)}if(g!==null){if(isNaN(g))return!1;this.channels.v=Math.max(0,Math.min(100,this.maxV,g),this.minV)}if(v!==null){if(isNaN(v))return!1;this.channels.a=this.hasAlphaChannel()?Math.max(0,Math.min(1,this.maxA,v),this.minA):1}var w=e.HSV_RGB(this.channels.h,this.channels.s,this.channels.v);return this.channels.r=w[0],this.channels.g=w[1],this.channels.b=w[2],this.exposeColor(x),!0},this.fromRGBA=function(a,f,g,v,x){if(a===void 0&&(a=null),f===void 0&&(f=null),g===void 0&&(g=null),v===void 0&&(v=null),a!==null){if(isNaN(a))return!1;a=Math.max(0,Math.min(255,a))}if(f!==null){if(isNaN(f))return!1;f=Math.max(0,Math.min(255,f))}if(g!==null){if(isNaN(g))return!1;g=Math.max(0,Math.min(255,g))}if(v!==null){if(isNaN(v))return!1;this.channels.a=this.hasAlphaChannel()?Math.max(0,Math.min(1,this.maxA,v),this.minA):1}var w=e.RGB_HSV(a===null?this.channels.r:a,f===null?this.channels.g:f,g===null?this.channels.b:g);w[0]!==null&&(this.channels.h=Math.max(0,Math.min(360,w[0]))),w[2]!==0&&(this.channels.s=Math.max(0,this.minS,Math.min(100,this.maxS,w[1]))),this.channels.v=Math.max(0,this.minV,Math.min(100,this.maxV,w[2]));var C=e.HSV_RGB(this.channels.h,this.channels.s,this.channels.v);return this.channels.r=C[0],this.channels.g=C[1],this.channels.b=C[2],this.exposeColor(x),!0},this.fromHSV=function(a,f,g,v){return console.warn("fromHSV() method is DEPRECATED. Using fromHSVA() instead."+e.docsRef),this.fromHSVA(a,f,g,null,v)},this.fromRGB=function(a,f,g,v){return console.warn("fromRGB() method is DEPRECATED. Using fromRGBA() instead."+e.docsRef),this.fromRGBA(a,f,g,null,v)},this.fromString=function(a,f){if(!this.required&&a.trim()==="")return this.setPreviewElementBg(null),this.setValueElementValue(""),!0;var g=e.parseColorString(a);return g?(this.format.toLowerCase()==="any"&&(this._setFormat(g.format),e.isAlphaFormat(this.getFormat())||(g.rgba[3]=1)),this.fromRGBA(g.rgba[0],g.rgba[1],g.rgba[2],g.rgba[3],f),!0):!1},this.randomize=function(a,f,g,v,x,w,C,k){a===void 0&&(a=0),f===void 0&&(f=100),g===void 0&&(g=0),v===void 0&&(v=100),x===void 0&&(x=0),w===void 0&&(w=359),C===void 0&&(C=1),k===void 0&&(k=1),this.fromHSVA(x+Math.floor(Math.random()*(w-x+1)),g+Math.floor(Math.random()*(v-g+1)),a+Math.floor(Math.random()*(f-a+1)),(100*C+Math.floor(Math.random()*(100*(k-C)+1)))/100)},this.toString=function(a){switch(a===void 0&&(a=this.getFormat()),a.toLowerCase()){case"hex":return this.toHEXString();case"hexa":return this.toHEXAString();case"rgb":return this.toRGBString();case"rgba":return this.toRGBAString()}return!1},this.toHEXString=function(){return e.hexColor(this.channels.r,this.channels.g,this.channels.b)},this.toHEXAString=function(){return e.hexaColor(this.channels.r,this.channels.g,this.channels.b,this.channels.a)},this.toRGBString=function(){return e.rgbColor(this.channels.r,this.channels.g,this.channels.b)},this.toRGBAString=function(){return e.rgbaColor(this.channels.r,this.channels.g,this.channels.b,this.channels.a)},this.toGrayscale=function(){return .213*this.channels.r+.715*this.channels.g+.072*this.channels.b},this.toCanvas=function(){return e.genColorPreviewCanvas(this.toRGBAString()).canvas},this.toDataURL=function(){return this.toCanvas().toDataURL()},this.toBackground=function(){return e.pub.background(this.toRGBAString())},this.isLight=function(){return this.toGrayscale()>127.5},this.hide=function(){y()&&d()},this.show=function(){h()},this.redraw=function(){y()&&h()},this.getFormat=function(){return this._currentFormat},this._setFormat=function(a){this._currentFormat=a.toLowerCase()},this.hasAlphaChannel=function(){return this.alphaChannel==="auto"?this.format.toLowerCase()==="any"||e.isAlphaFormat(this.getFormat())||this.alpha!==void 0||this.alphaElement!==void 0:this.alphaChannel},this.processValueInput=function(a){this.fromString(a)||this.exposeColor()},this.processAlphaInput=function(a){this.fromHSVA(null,null,null,parseFloat(a))||this.exposeColor()},this.exposeColor=function(a){var f=this.toString(),g=this.getFormat();if(e.setDataAttr(this.targetElement,"current-color",f),!(a&e.flags.leaveValue)&&this.valueElement&&((g==="hex"||g==="hexa")&&(this.uppercase||(f=f.toLowerCase()),this.hash||(f=f.replace(/^#/,""))),this.setValueElementValue(f)),!(a&e.flags.leaveAlpha)&&this.alphaElement){var v=Math.round(this.channels.a*100)/100;this.setAlphaElementValue(v)}!(a&e.flags.leavePreview)&&this.previewElement&&((e.isTextInput(this.previewElement)||e.isButton(this.previewElement)&&!e.isButtonEmpty(this.previewElement))&&this.previewPosition,this.setPreviewElementBg(this.toRGBAString())),y()&&(u(),p(),m())},this.setPreviewElementBg=function(a){if(this.previewElement){var f=null,g=null;(e.isTextInput(this.previewElement)||e.isButton(this.previewElement)&&!e.isButtonEmpty(this.previewElement))&&(f=this.previewPosition,g=this.previewSize);var v=[];if(!a)v.push({image:"none",position:"left top",size:"auto",repeat:"no-repeat",origin:"padding-box"});else{v.push({image:e.genColorPreviewGradient(a,f,g?g-e.pub.previewSeparator.length:null),position:"left top",size:"auto",repeat:f?"repeat-y":"repeat",origin:"padding-box"});var x=e.genColorPreviewCanvas("rgba(0,0,0,0)",f?{left:"right",right:"left"}[f]:null,g,!0);v.push({image:"url('"+x.canvas.toDataURL()+"')",position:(f||"left")+" top",size:x.width+"px "+x.height+"px",repeat:f?"repeat-y":"repeat",origin:"padding-box"})}for(var w={image:[],position:[],size:[],repeat:[],origin:[]},C=0;C<v.length;C+=1)w.image.push(v[C].image),w.position.push(v[C].position),w.size.push(v[C].size),w.repeat.push(v[C].repeat),w.origin.push(v[C].origin);var _={"background-image":w.image.join(", "),"background-position":w.position.join(", "),"background-size":w.size.join(", "),"background-repeat":w.repeat.join(", "),"background-origin":w.origin.join(", ")};e.setStyle(this.previewElement,_,this.forceStyle);var k={left:null,right:null};f&&(k[f]=this.previewSize+this.previewPadding+"px");var _={"padding-left":k.left,"padding-right":k.right};e.setStyle(this.previewElement,_,this.forceStyle,!0)}},this.setValueElementValue=function(a){this.valueElement&&(e.nodeName(this.valueElement)==="input"?this.valueElement.value=a:this.valueElement.innerHTML=a)},this.setAlphaElementValue=function(a){this.alphaElement&&(e.nodeName(this.alphaElement)==="input"?this.alphaElement.value=a:this.alphaElement.innerHTML=a)},this._processParentElementsInDOM=function(){if(!this._parentElementsProcessed){this._parentElementsProcessed=!0;var a=this.targetElement;do{var f=e.getCompStyle(a);f.position&&f.position.toLowerCase()==="fixed"&&(this.fixed=!0),a!==this.targetElement&&(e.getData(a,"hasScrollListener")||(a.addEventListener("scroll",e.onParentScroll,!1),e.setData(a,"hasScrollListener",!0)))}while((a=a.parentNode)&&e.nodeName(a)!=="body")}},this.tryHide=function(){this.hideOnLeave&&this.hide()},this.set__palette=function(a){this.palette=a,this._palette=e.parsePaletteValue(a),this._paletteHasTransparency=e.containsTranparentColor(this._palette)};function o(a,f){if(typeof a!="string")throw new Error("Invalid value for option name: "+a);if(e.enumOpts.hasOwnProperty(a)&&(typeof f=="string"&&(f=f.toLowerCase()),e.enumOpts[a].indexOf(f)===-1))throw new Error("Option '"+a+"' has invalid value: "+f);if(e.deprecatedOpts.hasOwnProperty(a)){var g=a,v=e.deprecatedOpts[a];if(v)console.warn("Option '%s' is DEPRECATED, using '%s' instead."+e.docsRef,g,v),a=v;else throw new Error("Option '"+a+"' is DEPRECATED")}var x="set__"+a;if(typeof t[x]=="function")return t[x](f),!0;if(a in t)return t[a]=f,!0;throw new Error("Unrecognized configuration option: "+a)}function s(a){if(typeof a!="string")throw new Error("Invalid value for option name: "+a);if(e.deprecatedOpts.hasOwnProperty(a)){var f=a,g=e.deprecatedOpts[a];if(g)console.warn("Option '%s' is DEPRECATED, using '%s' instead."+e.docsRef,f,g),a=g;else throw new Error("Option '"+a+"' is DEPRECATED")}var v="get__"+a;if(typeof t[v]=="function")return t[v](value);if(a in t)return t[a];throw new Error("Unrecognized configuration option: "+a)}function d(){e.removeClass(t.targetElement,e.pub.activeClassName),e.picker.wrap.parentNode.removeChild(e.picker.wrap),delete e.picker.owner}function h(){t._processParentElementsInDOM(),e.picker||(e.picker={owner:null,wrap:e.createEl("div"),box:e.createEl("div"),boxS:e.createEl("div"),boxB:e.createEl("div"),pad:e.createEl("div"),padB:e.createEl("div"),padM:e.createEl("div"),padCanvas:e.createPadCanvas(),cross:e.createEl("div"),crossBY:e.createEl("div"),crossBX:e.createEl("div"),crossLY:e.createEl("div"),crossLX:e.createEl("div"),sld:e.createEl("div"),sldB:e.createEl("div"),sldM:e.createEl("div"),sldGrad:e.createSliderGradient(),sldPtrS:e.createEl("div"),sldPtrIB:e.createEl("div"),sldPtrMB:e.createEl("div"),sldPtrOB:e.createEl("div"),asld:e.createEl("div"),asldB:e.createEl("div"),asldM:e.createEl("div"),asldGrad:e.createASliderGradient(),asldPtrS:e.createEl("div"),asldPtrIB:e.createEl("div"),asldPtrMB:e.createEl("div"),asldPtrOB:e.createEl("div"),pal:e.createEl("div"),btn:e.createEl("div"),btnT:e.createEl("div")},e.picker.pad.appendChild(e.picker.padCanvas.elm),e.picker.padB.appendChild(e.picker.pad),e.picker.cross.appendChild(e.picker.crossBY),e.picker.cross.appendChild(e.picker.crossBX),e.picker.cross.appendChild(e.picker.crossLY),e.picker.cross.appendChild(e.picker.crossLX),e.picker.padB.appendChild(e.picker.cross),e.picker.box.appendChild(e.picker.padB),e.picker.box.appendChild(e.picker.padM),e.picker.sld.appendChild(e.picker.sldGrad.elm),e.picker.sldB.appendChild(e.picker.sld),e.picker.sldB.appendChild(e.picker.sldPtrOB),e.picker.sldPtrOB.appendChild(e.picker.sldPtrMB),e.picker.sldPtrMB.appendChild(e.picker.sldPtrIB),e.picker.sldPtrIB.appendChild(e.picker.sldPtrS),e.picker.box.appendChild(e.picker.sldB),e.picker.box.appendChild(e.picker.sldM),e.picker.asld.appendChild(e.picker.asldGrad.elm),e.picker.asldB.appendChild(e.picker.asld),e.picker.asldB.appendChild(e.picker.asldPtrOB),e.picker.asldPtrOB.appendChild(e.picker.asldPtrMB),e.picker.asldPtrMB.appendChild(e.picker.asldPtrIB),e.picker.asldPtrIB.appendChild(e.picker.asldPtrS),e.picker.box.appendChild(e.picker.asldB),e.picker.box.appendChild(e.picker.asldM),e.picker.box.appendChild(e.picker.pal),e.picker.btn.appendChild(e.picker.btnT),e.picker.box.appendChild(e.picker.btn),e.picker.boxB.appendChild(e.picker.box),e.picker.wrap.appendChild(e.picker.boxS),e.picker.wrap.appendChild(e.picker.boxB),e.picker.wrap.addEventListener("touchstart",e.onPickerTouchStart,e.isPassiveEventSupported?{passive:!1}:!1));var a=e.picker,f=!!e.getSliderChannel(t),g=t.hasAlphaChannel(),v=e.getPickerDims(t),x=2*t.pointerBorderWidth+t.pointerThickness+2*t.crossSize,w=e.getControlPadding(t),C=Math.min(t.borderRadius,Math.round(t.padding*Math.PI)),k="crosshair";a.wrap.className="jscolor-wrap",a.wrap.style.width=v.borderW+"px",a.wrap.style.height=v.borderH+"px",a.wrap.style.zIndex=t.zIndex,a.box.className="jscolor-picker",a.box.style.width=v.paddedW+"px",a.box.style.height=v.paddedH+"px",a.boxS.className="jscolor-shadow",e.setBorderRadius(a.boxS,C+"px"),a.boxB.className="jscolor-border",a.boxB.style.border=t.borderWidth+"px solid",a.boxB.style.borderColor=t.borderColor,a.boxB.style.background=t.backgroundColor,e.setBorderRadius(a.boxB,C+"px"),a.padM.style.background="rgba(255,0,0,.2)",a.sldM.style.background="rgba(0,255,0,.2)",a.asldM.style.background="rgba(0,0,255,.2)",a.padM.style.opacity=a.sldM.style.opacity=a.asldM.style.opacity="0",a.pad.style.position="relative",a.pad.style.width=t.width+"px",a.pad.style.height=t.height+"px",a.padCanvas.draw(t.width,t.height,e.getPadYChannel(t)),a.padB.style.position="absolute",a.padB.style.left=t.padding+"px",a.padB.style.top=t.padding+"px",a.padB.style.border=t.controlBorderWidth+"px solid",a.padB.style.borderColor=t.controlBorderColor,a.padM.style.position="absolute",a.padM.style.left="0px",a.padM.style.top="0px",a.padM.style.width=t.padding+2*t.controlBorderWidth+t.width+w+"px",a.padM.style.height=2*t.controlBorderWidth+2*t.padding+t.height+"px",a.padM.style.cursor=k,e.setData(a.padM,{instance:t,control:"pad"}),a.cross.style.position="absolute",a.cross.style.left=a.cross.style.top="0",a.cross.style.width=a.cross.style.height=x+"px",a.crossBY.style.position=a.crossBX.style.position="absolute",a.crossBY.style.background=a.crossBX.style.background=t.pointerBorderColor,a.crossBY.style.width=a.crossBX.style.height=2*t.pointerBorderWidth+t.pointerThickness+"px",a.crossBY.style.height=a.crossBX.style.width=x+"px",a.crossBY.style.left=a.crossBX.style.top=Math.floor(x/2)-Math.floor(t.pointerThickness/2)-t.pointerBorderWidth+"px",a.crossBY.style.top=a.crossBX.style.left="0",a.crossLY.style.position=a.crossLX.style.position="absolute",a.crossLY.style.background=a.crossLX.style.background=t.pointerColor,a.crossLY.style.height=a.crossLX.style.width=x-2*t.pointerBorderWidth+"px",a.crossLY.style.width=a.crossLX.style.height=t.pointerThickness+"px",a.crossLY.style.left=a.crossLX.style.top=Math.floor(x/2)-Math.floor(t.pointerThickness/2)+"px",a.crossLY.style.top=a.crossLX.style.left=t.pointerBorderWidth+"px",a.sld.style.overflow="hidden",a.sld.style.width=t.sliderSize+"px",a.sld.style.height=t.height+"px",a.sldGrad.draw(t.sliderSize,t.height,"#000","#000"),a.sldB.style.display=f?"block":"none",a.sldB.style.position="absolute",a.sldB.style.left=t.padding+t.width+2*t.controlBorderWidth+2*w+"px",a.sldB.style.top=t.padding+"px",a.sldB.style.border=t.controlBorderWidth+"px solid",a.sldB.style.borderColor=t.controlBorderColor,a.sldM.style.display=f?"block":"none",a.sldM.style.position="absolute",a.sldM.style.left=t.padding+t.width+2*t.controlBorderWidth+w+"px",a.sldM.style.top="0px",a.sldM.style.width=t.sliderSize+2*w+2*t.controlBorderWidth+(g?0:Math.max(0,t.padding-w))+"px",a.sldM.style.height=2*t.controlBorderWidth+2*t.padding+t.height+"px",a.sldM.style.cursor="default",e.setData(a.sldM,{instance:t,control:"sld"}),a.sldPtrIB.style.border=a.sldPtrOB.style.border=t.pointerBorderWidth+"px solid "+t.pointerBorderColor,a.sldPtrOB.style.position="absolute",a.sldPtrOB.style.left=-(2*t.pointerBorderWidth+t.pointerThickness)+"px",a.sldPtrOB.style.top="0",a.sldPtrMB.style.border=t.pointerThickness+"px solid "+t.pointerColor,a.sldPtrS.style.width=t.sliderSize+"px",a.sldPtrS.style.height=e.pub.sliderInnerSpace+"px",a.asld.style.overflow="hidden",a.asld.style.width=t.sliderSize+"px",a.asld.style.height=t.height+"px",a.asldGrad.draw(t.sliderSize,t.height,"#000"),a.asldB.style.display=g?"block":"none",a.asldB.style.position="absolute",a.asldB.style.left=t.padding+t.width+2*t.controlBorderWidth+w+(f?t.sliderSize+3*w+2*t.controlBorderWidth:0)+"px",a.asldB.style.top=t.padding+"px",a.asldB.style.border=t.controlBorderWidth+"px solid",a.asldB.style.borderColor=t.controlBorderColor,a.asldM.style.display=g?"block":"none",a.asldM.style.position="absolute",a.asldM.style.left=t.padding+t.width+2*t.controlBorderWidth+w+(f?t.sliderSize+2*w+2*t.controlBorderWidth:0)+"px",a.asldM.style.top="0px",a.asldM.style.width=t.sliderSize+2*w+2*t.controlBorderWidth+Math.max(0,t.padding-w)+"px",a.asldM.style.height=2*t.controlBorderWidth+2*t.padding+t.height+"px",a.asldM.style.cursor="default",e.setData(a.asldM,{instance:t,control:"asld"}),a.asldPtrIB.style.border=a.asldPtrOB.style.border=t.pointerBorderWidth+"px solid "+t.pointerBorderColor,a.asldPtrOB.style.position="absolute",a.asldPtrOB.style.left=-(2*t.pointerBorderWidth+t.pointerThickness)+"px",a.asldPtrOB.style.top="0",a.asldPtrMB.style.border=t.pointerThickness+"px solid "+t.pointerColor,a.asldPtrS.style.width=t.sliderSize+"px",a.asldPtrS.style.height=e.pub.sliderInnerSpace+"px",a.pal.className="jscolor-palette",a.pal.style.display=v.palette.rows?"block":"none",a.pal.style.left=t.padding+"px",a.pal.style.top=2*t.controlBorderWidth+2*t.padding+t.height+"px",a.pal.innerHTML="";for(var _=e.genColorPreviewCanvas("rgba(0,0,0,0)"),H=0,se=0;se<v.palette.rows;se++)for(var le=0;le<v.palette.cols&&H<t._palette.length;le++,H++){var Q=t._palette[H],Ue=e.rgbaColor.apply(null,Q.rgba),Z=e.createEl("div");Z.style.width=v.palette.cellW-2*t.controlBorderWidth+"px",Z.style.height=v.palette.cellH-2*t.controlBorderWidth+"px",Z.style.backgroundColor=Ue;var B=e.createEl("div");B.className="jscolor-palette-sw",B.style.left=(v.palette.cols<=1?0:Math.round(10*(le*((v.contentW-v.palette.cellW)/(v.palette.cols-1))))/10)+"px",B.style.top=se*(v.palette.cellH+t.paletteSpacing)+"px",B.style.border=t.controlBorderWidth+"px solid",B.style.borderColor=t.controlBorderColor,Q.rgba[3]!==null&&Q.rgba[3]<1&&(B.style.backgroundImage="url('"+_.canvas.toDataURL()+"')",B.style.backgroundRepeat="repeat",B.style.backgroundPosition="center center"),e.setData(B,{instance:t,control:"palette-sw",color:Q}),B.addEventListener("click",e.onPaletteSampleClick,!1),B.appendChild(Z),a.pal.appendChild(B)}function je(){var G=t.controlBorderColor.split(/\s+/),Ye=G.length<2?G[0]:G[1]+" "+G[0]+" "+G[0]+" "+G[1];a.btn.style.borderColor=Ye}var me=15;a.btn.className="jscolor-btn jscolor-btn-close",a.btn.style.display=t.closeButton?"block":"none",a.btn.style.left=t.padding+"px",a.btn.style.bottom=t.padding+"px",a.btn.style.padding="0 "+me+"px",a.btn.style.maxWidth=v.contentW-2*t.controlBorderWidth-2*me+"px",a.btn.style.height=t.buttonHeight+"px",a.btn.style.border=t.controlBorderWidth+"px solid",je(),a.btn.style.color=t.buttonColor,a.btn.onmousedown=function(){t.hide()},a.btnT.style.display="inline",a.btnT.style.lineHeight=t.buttonHeight+"px",a.btnT.innerText=t.closeText,u(),p(),m(),e.picker.owner&&e.picker.owner!==t&&e.removeClass(e.picker.owner.targetElement,e.pub.activeClassName),e.picker.owner=t,e.redrawPosition(),a.wrap.parentNode!==t.container&&t.container.appendChild(a.wrap),e.addClass(t.targetElement,e.pub.activeClassName)}function u(){var a=e.getPadYChannel(t),f=Math.round(t.channels.h/360*(t.width-1)),g=Math.round((1-t.channels[a]/100)*(t.height-1)),v=2*t.pointerBorderWidth+t.pointerThickness+2*t.crossSize,x=-Math.floor(v/2);switch(e.picker.cross.style.left=f+x+"px",e.picker.cross.style.top=g+x+"px",e.getSliderChannel(t)){case"s":var w=e.HSV_RGB(t.channels.h,100,t.channels.v),C=e.HSV_RGB(t.channels.h,0,t.channels.v),_="rgb("+Math.round(w[0])+","+Math.round(w[1])+","+Math.round(w[2])+")",H="rgb("+Math.round(C[0])+","+Math.round(C[1])+","+Math.round(C[2])+")";e.picker.sldGrad.draw(t.sliderSize,t.height,_,H);break;case"v":var k=e.HSV_RGB(t.channels.h,t.channels.s,100),_="rgb("+Math.round(k[0])+","+Math.round(k[1])+","+Math.round(k[2])+")",H="#000";e.picker.sldGrad.draw(t.sliderSize,t.height,_,H);break}e.picker.asldGrad.draw(t.sliderSize,t.height,t.toHEXString())}function p(){var a=e.getSliderChannel(t);if(a){var f=Math.round((1-t.channels[a]/100)*(t.height-1));e.picker.sldPtrOB.style.top=f-(2*t.pointerBorderWidth+t.pointerThickness)-Math.floor(e.pub.sliderInnerSpace/2)+"px"}e.picker.asldGrad.draw(t.sliderSize,t.height,t.toHEXString())}function m(){var a=Math.round((1-t.channels.a)*(t.height-1));e.picker.asldPtrOB.style.top=a-(2*t.pointerBorderWidth+t.pointerThickness)-Math.floor(e.pub.sliderInnerSpace/2)+"px"}function y(){return e.picker&&e.picker.owner===t}function b(a){e.eventKey(a)==="Enter"&&(t.valueElement&&t.processValueInput(t.valueElement.value),t.tryHide())}function L(a){e.eventKey(a)==="Enter"&&(t.alphaElement&&t.processAlphaInput(t.alphaElement.value),t.tryHide())}function M(a){if(!e.getData(a,"internal")){var f=t.valueElement.value;t.processValueInput(t.valueElement.value),e.triggerCallback(t,"onChange"),t.valueElement.value!==f&&e.triggerInputEvent(t.valueElement,"change",!0,!0)}}function $(a){if(!e.getData(a,"internal")){var f=t.alphaElement.value;t.processAlphaInput(t.alphaElement.value),e.triggerCallback(t,"onChange"),e.triggerInputEvent(t.valueElement,"change",!0,!0),t.alphaElement.value!==f&&e.triggerInputEvent(t.alphaElement,"change",!0,!0)}}function ae(a){e.getData(a,"internal")||(t.valueElement&&t.fromString(t.valueElement.value,e.flags.leaveValue),e.triggerCallback(t,"onInput"))}function Ve(a){e.getData(a,"internal")||(t.alphaElement&&t.fromHSVA(null,null,null,parseFloat(t.alphaElement.value),e.flags.leaveAlpha),e.triggerCallback(t,"onInput"),e.triggerInputEvent(t.valueElement,"input",!0,!0))}if(e.pub.options){for(var A in e.pub.options)if(e.pub.options.hasOwnProperty(A))try{o(A,e.pub.options[A])}catch(a){console.warn(a)}}var N=[];n.preset&&(typeof n.preset=="string"?N=n.preset.split(/\s+/):Array.isArray(n.preset)?N=n.preset.slice():console.warn("Unrecognized preset value")),N.indexOf("default")===-1&&N.push("default");for(var oe=N.length-1;oe>=0;oe-=1){var W=N[oe];if(W){if(!e.pub.presets.hasOwnProperty(W)){console.warn("Unknown preset: %s",W);continue}for(var A in e.pub.presets[W])if(e.pub.presets[W].hasOwnProperty(A))try{o(A,e.pub.presets[W][A])}catch(f){console.warn(f)}}}var Fe=["preset"];for(var A in n)if(n.hasOwnProperty(A)&&Fe.indexOf(A)===-1)try{o(A,n[A])}catch(f){console.warn(f)}if(this.container===void 0?this.container=i.document.body:this.container=e.node(this.container),!this.container)throw new Error("Cannot instantiate color picker without a container element");if(this.targetElement=e.node(r),!this.targetElement){if(typeof r=="string"&&/^[a-zA-Z][\w:.-]*$/.test(r)){var fe=r;throw new Error("If '"+fe+"' is supposed to be an ID, please use '#"+fe+"' or any valid CSS selector.")}throw new Error("Cannot instantiate color picker without a target element")}if(this.targetElement.jscolor&&this.targetElement.jscolor instanceof e.pub)throw new Error("Color picker already installed on this element");if(this.targetElement.jscolor=this,e.addClass(this.targetElement,e.pub.className),e.instances.push(this),e.isButton(this.targetElement)&&(this.targetElement.type.toLowerCase()!=="button"&&(this.targetElement.type="button"),e.isButtonEmpty(this.targetElement))){e.removeChildren(this.targetElement),this.targetElement.appendChild(i.document.createTextNode(""));var Oe=e.getCompStyle(this.targetElement),Xe=parseFloat(Oe["min-width"])||0;Xe<this.previewSize&&e.setStyle(this.targetElement,{"min-width":this.previewSize+"px"},this.forceStyle)}if(this.valueElement===void 0?e.isTextInput(this.targetElement)&&(this.valueElement=this.targetElement):this.valueElement===null||(this.valueElement=e.node(this.valueElement)),this.alphaElement&&(this.alphaElement=e.node(this.alphaElement)),this.previewElement===void 0?this.previewElement=this.targetElement:this.previewElement===null||(this.previewElement=e.node(this.previewElement)),this.valueElement&&e.isTextInput(this.valueElement)){var ge={onInput:this.valueElement.oninput};this.valueElement.oninput=null,this.valueElement.addEventListener("keydown",b,!1),this.valueElement.addEventListener("change",M,!1),this.valueElement.addEventListener("input",ae,!1),ge.onInput&&this.valueElement.addEventListener("input",ge.onInput,!1),this.valueElement.setAttribute("autocomplete","off"),this.valueElement.setAttribute("autocorrect","off"),this.valueElement.setAttribute("autocapitalize","off"),this.valueElement.setAttribute("spellcheck",!1)}this.alphaElement&&e.isTextInput(this.alphaElement)&&(this.alphaElement.addEventListener("keydown",L,!1),this.alphaElement.addEventListener("change",$,!1),this.alphaElement.addEventListener("input",Ve,!1),this.alphaElement.setAttribute("autocomplete","off"),this.alphaElement.setAttribute("autocorrect","off"),this.alphaElement.setAttribute("autocapitalize","off"),this.alphaElement.setAttribute("spellcheck",!1));var K="FFFFFF";this.value!==void 0?K=this.value:this.valueElement&&this.valueElement.value!==void 0&&(K=this.valueElement.value);var J=void 0;if(this.alpha!==void 0?J=""+this.alpha:this.alphaElement&&this.alphaElement.value!==void 0&&(J=this.alphaElement.value),this._currentFormat=null,["auto","any"].indexOf(this.format.toLowerCase())>-1){var ve=e.parseColorString(K);this._currentFormat=ve?ve.format:"hex"}else this._currentFormat=this.format.toLowerCase();this.processValueInput(K),J!==void 0&&this.processAlphaInput(J),this.random&&this.randomize.apply(this,Array.isArray(this.random)?this.random:[])}};return e.pub.className="jscolor",e.pub.activeClassName="jscolor-active",e.pub.looseJSON=!0,e.pub.presets={},e.pub.presets.default={},e.pub.presets.light={backgroundColor:"rgba(255,255,255,1)",controlBorderColor:"rgba(187,187,187,1)",buttonColor:"rgba(0,0,0,1)"},e.pub.presets.dark={backgroundColor:"rgba(51,51,51,1)",controlBorderColor:"rgba(153,153,153,1)",buttonColor:"rgba(240,240,240,1)"},e.pub.presets.small={width:101,height:101,padding:10,sliderSize:14,paletteCols:8},e.pub.presets.medium={width:181,height:101,padding:12,sliderSize:16,paletteCols:10},e.pub.presets.large={width:271,height:151,padding:12,sliderSize:24,paletteCols:15},e.pub.presets.thin={borderWidth:1,controlBorderWidth:1,pointerBorderWidth:1},e.pub.presets.thick={borderWidth:2,controlBorderWidth:2,pointerBorderWidth:2},e.pub.sliderInnerSpace=3,e.pub.chessboardSize=8,e.pub.chessboardColor1="#666666",e.pub.chessboardColor2="#999999",e.pub.previewSeparator=["rgba(255,255,255,.65)","rgba(128,128,128,.65)"],e.pub.init=function(){if(!e.initialized)for(i.document.addEventListener("mousedown",e.onDocumentMouseDown,!1),i.document.addEventListener("keyup",e.onDocumentKeyUp,!1),i.addEventListener("resize",e.onWindowResize,!1),i.addEventListener("scroll",e.onWindowScroll,!1),e.appendDefaultCss(),e.pub.install(),e.initialized=!0;e.readyQueue.length;){var r=e.readyQueue.shift();r()}},e.pub.install=function(r){var n=!0;try{e.installBySelector("[data-jscolor]",r)}catch(t){n=!1,console.warn(t)}if(e.pub.lookupClass)try{e.installBySelector("input."+e.pub.lookupClass+", button."+e.pub.lookupClass,r)}catch{}return n},e.pub.ready=function(r){return typeof r!="function"?(console.warn("Passed value is not a function"),!1):(e.initialized?r():e.readyQueue.push(r),!0)},e.pub.trigger=function(r){var n=function(){e.triggerGlobal(r)};e.initialized?n():e.pub.ready(n)},e.pub.hide=function(){e.picker&&e.picker.owner&&e.picker.owner.hide()},e.pub.chessboard=function(r){r||(r="rgba(0,0,0,0)");var n=e.genColorPreviewCanvas(r);return n.canvas.toDataURL()},e.pub.background=function(r){var n=[];n.push(e.genColorPreviewGradient(r));var t=e.genColorPreviewCanvas();return n.push(["url('"+t.canvas.toDataURL()+"')","left top","repeat"].join(" ")),n.join(", ")},e.pub.options={},e.pub.lookupClass="jscolor",e.pub.installByClassName=function(){return console.error('jscolor.installByClassName() is DEPRECATED. Use data-jscolor="" attribute instead of a class name.'+e.docsRef),!1},e.register(),e.pub}();return typeof i.jscolor>"u"&&(i.jscolor=i.JSColor=l),l})})(Te);var St=Te.exports;const kt=Et(St),At=16,Bt=16,Pt=[0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,6,6,6,6,6,6,6,6,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,6,1,1,1,1,1,1,1,1,6,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,1,1,1,1,1,1,1,1,1,6,6,6,6,6,6,6,1,1,1,1,1,1,1,1,1,6,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,6,6,1,1,1,1,1,1,1,1,1,1,0,1,1,1,6,6,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0],Mt={width:At,height:Bt,pixels:Pt};let He,Ie,De,ue,Ae,pe,Be,te,re,E={activeColor:0,activeTool:"brush",scale:0,bitmap:P.fromJSON(Mt),palette:["#00000000","#000000ff","#ffffffff","#44AA90FF","#faead6ff","#de7895ff","#f75060ff","#f7885fff","#f2c469ff","#b1d36fff","#3ee0cfff","#0091c2ff","#ad6dcaff"],paletteEdit:!1};function $t(){const c="0123456789ABCDEF";let i="#";for(let l=0;l<6;l++)i+=c[Math.floor(Math.random()*16)];return i}const ze={brush:ht,flood:ut,line:ft,rect:pt,shift:gt},_t={flood:"fa-fill-drip",brush:"fa-paintbrush",rect:"fa-vector-square",line:"fa-minus",shift:"fa-up-down-left-right"};function Rt(c,i){return{...c,...i}}function R(c){const i=Object.keys(c);E=Rt(E,c),He.syncState(E,i),Ie.syncState(E,i)}function Lt(){const c=document.createElement("a");c.setAttribute("href",re.toDataURL("image/x-icon")),c.setAttribute("download","favicon.ico"),document.body.appendChild(c),c.click(),c.remove()}function Tt(c){if(E.palette.length==1){alert("you need some color in your life");return}const i=E.palette.filter((e,r)=>r!=c),l=E.bitmap.pixels.map(e=>e==c?0:e>c?e-1:e);R({palette:i,bitmap:new P(16,16,l)})}function Ht(c,i){const l=[...E.palette];l[i]=c.toRGBAString(),R({palette:l,bitmap:new P(16,16,E.bitmap.pixels)})}function Pe(c){const i=document.getElementById(`color-${c}`);if(!i.jscolor){const l=new kt(i,{preset:"dark large",format:"hexa",value:E.palette[c],onInput:()=>Ht(l,c),previewElement:null})}i.jscolor.show()}function Ne(){return ee`<div id="site">
    <div id="tool-container">
      ${Object.keys(ze).map(c=>ee`<button
            class=${E.activeTool==c?"active":""}
            @click=${()=>R({activeTool:c})}>
            <i class="fa-solid ${_t[c]}"></i>
          </button>`)}

      <canvas
        id="preview"
        width="${16*devicePixelRatio}px"
        height="${16*devicePixelRatio}px"></canvas>

      <button @click=${()=>Lt()}>
        <i class="fa-solid fa-download"></i>
      </button>
    </div>

    <div id="editor-container">
      <canvas id="art"></canvas>
      <canvas id="grid"></canvas>
      <canvas id="outline"></canvas>
    </div>

    <div id="color-palette">
      <button
        class="${E.editingPalette?"selected":""}"
        @click=${()=>R({editingPalette:!E.editingPalette})}>
        <i class="fa-solid fa-pen"></i>
      </button>
      <button
        style="aspect-ratio: 1;"
        @click=${()=>{let c=[...E.palette];c.push($t()),R({palette:c})}}>
        <i class="fa-solid fa-plus"></i>
      </button>
      ${E.palette.map((c,i)=>ee`<div
            style="--current: ${c};"
            class="color-select ${i==E.activeColor?"selected":""}"
            @click=${()=>R({activeColor:i})}>
            ${E.editingPalette&&i>0?ee`
                  <button class="delete" @click=${()=>Tt(i)}>
                    <i class="fa-solid fa-x"></i>
                  </button>
                  <button
                    id="color-${i}"
                    class="edit-color"
                    @click=${l=>Pe(i,l.currentTarget)}></button>
                  <div class="editicon" @click=${l=>Pe(i)}>
                    <i class="fa-solid fa-pen"></i>
                  </div>
                `:""}
          </div>`)}
    </div>
  </div>`}const We=()=>{Le(Ne(),document.body),window.requestAnimationFrame(We)};function Ge(){ue.getBoundingClientRect().height;const c=pe.getBoundingClientRect().height,i=De.getBoundingClientRect(),l=i.width*devicePixelRatio,e=(i.height-c-150)*devicePixelRatio,r=Math.min(Math.floor(l/16),Math.floor(e/16)),t=r*16/devicePixelRatio;return ue.style.cssText=`width: ${t}px;`,pe.style.cssText=`width: ${t}px;`,r}window.onload=()=>{Le(Ne(),document.body),De=document.getElementById("site"),Be=document.getElementById("grid"),te=document.getElementById("outline"),Ae=document.getElementById("preview"),re=document.getElementById("art"),document.getElementById("editor-container"),ue=document.getElementById("color-palette"),pe=document.getElementById("tool-container"),E.scale=Ge();function c({state:i}){let{bitmap:l}=i;return{syncState(e){if(e.bitmap==l)return;l=e.bitmap;const r=document.querySelectorAll('link[rel="shortcut icon"]');for(let t=0,o=r.length;t<o;t++)document.head.removeChild(r[t]);const n=document.createElement("link");n.type="image/x-icon",n.rel="shortcut icon",n.href=re.toDataURL("image/x-icon"),document.getElementsByTagName("head")[0].appendChild(n)}}}Ie=new ke({state:E,dispatch:R,components:[wt({canvas:Ae})]}),He=new ke({state:E,dispatch:R,components:[mt({canvas:re}),ot({canvas:Be}),lt({target:te}),ct({canvas:te}),xt({tools:ze,target:te}),c]}),We()};window.addEventListener("resize",c=>{R({scale:Ge(),bitmap:new P(16,16,E.bitmap.pixels)})});
